<html>
    <head>
        <title>Reminder Auth</title>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0-beta.5/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0/angular-resource.js"></script>
        <script src="assets/app.js"></script>
        <script src="assets/services/minderDTO-resource.js"></script>
    </head>
    <body ng-app="minderApp" ng-controller="Main as ctrl">
    <h1>Get the Auth Out</h1>{{ctrl.welcome}}<br>

    <div ng-controller="User as ctrl">
        <input type="text" ng-model="ctrl.User.current.email" placeholder="username"><br>
        <input type="password" ng-model="ctrl.User.current.password" placeholder="password"><br>
        <br>

        <button ng-click="ctrl.User.register()">Register</button>
        <button ng-click="ctrl.User.login()">Login</button>
    </div>

    <hr>

    <div ng-if="ctrl.isCurrentUser()">
        <form>
            <input type="text"
                   ng-model="ctrl.Minder.new.description"
                   placeholder="description">
            <input type="submit"
                   ng-click="ctrl.Minder.post( ctrl.Minder.new )"
                   value="Add Reminder"> 
        </form>
    </div>

    <hr>

    <div ng-repeat="result in ctrl.Minder.all">
        <div ng-hide="result.isEditable">
            <span ng-click="ctrl.showOne(ctrl.result.id)">
                <span ng-bind="result.description"></span>
            </span>
            <button ng-click="ctrl.Minder.completed( result.id )">
                Completed = {{ result.completed }}
            </button>
            <button ng-click="ctrl.editForm($index)">
                Edit
            </button>
            <button ng-click="ctrl.Minder.delete( result.id )">
                Delete
            </button>
        </div>

        <div ng-show="result.isEditable">
            <input type="text"
                   ng-model="ctrl.Minder.all[$index].newDesc"
                   ng-show="result.isEditable">
            <button ng-click="ctrl.Minder.update( result.id, {description: result.newDesc}); ctrl.editForm($index)">
                Update
            </button>
            <button ng-click="ctrl.editForm($index)">
                Cancel
            </button>
        </div>
    </div>
    <pre>
        {{ ctrl.Minder.all | json }}
    </pre>

</html>