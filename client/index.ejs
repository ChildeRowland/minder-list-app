<html>
    <head>
        <title>Reminder Auth</title>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0-beta.5/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0/angular-resource.js"></script>
        <script src="assets/app.js"></script>
    </head>
    <body ng-app="minderApp" ng-controller="Main as ctrl">
    <h1>Get the Auth Out</h1>{{ctrl.welcome}}<br>

    <input type="text" ng-model="ctrl.email" placeholder="username"><br>
    <input type="password" ng-model="ctrl.password" placeholder="password"><br>
    <br>

    <button ng-click="ctrl.register()">Register</button>
    <button ng-click="ctrl.login()">Login</button>

    <hr>

    <div ng-if="ctrl.isCurrentUser()">
        <form>
            <input type="text"
                   ng-model="ctrl.Minder.new.description"
                   placeholder="description">
            <input type="submit"
                   ng-click="ctrl.Minder.post( ctrl.Minder.new )"
                   value="Add Reminder"> 
        </form>
    </div>

    <hr>

    <div ng-repeat="result in ctrl.Minder.all track by $index">
        <span ng-click="ctrl.showOne(result.id)">
            <span ng-bind="result.id"></span>
            <span ng-bind="result.description"
                  ng-hide="ctrl.isEditable">
            </span>
            <input type="text"
                   ng-model="result.newDesc"
                   ng-show="ctrl.isEditable">
            <button ng-click="ctrl.Minder.update( result.id, {description: result.newDesc}); ctrl.editForm()"
                    ng-show="ctrl.isEditable">
                Update
            </button>
        </span>
        <button ng-click="ctrl.Minder.completed( result.id )"
                ng-hide="ctrl.isEditable">
            Completed = {{ result.completed }}
        </button>
        <button ng-click="ctrl.editForm()"
                ng-hide="ctrl.isEditable">
            Edit
        </button>
        <button ng-click="ctrl.editForm()"
                ng-show="ctrl.isEditable">
            Cancel
        </button>
        <button ng-click="ctrl.Minder.delete( result.id )"
                ng-hide="ctrl.isEditable">
            Delete
        </button>
    </div>
    <pre>
        {{ ctrl.Minder.all | json }}
    </pre>

</html>